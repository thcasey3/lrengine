

<!DOCTYPE html>
<html class="writer-html5" lang="Python" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Call a Custom Function &mdash; lrengine  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/lrtheme.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-rendered-html.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="seaborn relplot" href="sea.html" />
    <link rel="prev" title="Narrow the Date Range" href="narrow_dates.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> lrengine
          

          
            
            <img src="_static/web_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing lrengine</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to lrengine</a></li>
<li class="toctree-l1"><a class="reference internal" href="create.html">Create a Start Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="define_patterns.html">Defining Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="reduce_names.html">Reduce the Frame Using Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_dates.html">Finding Dates</a></li>
<li class="toctree-l1"><a class="reference internal" href="reduce_dates.html">Reduce the Date Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="narrow_dates.html">Narrow the Date Range</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Call a Custom Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="sea.html">seaborn relplot</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_directory.html">Map a Directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="save.html">Save the Frame to csv</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">lrengine Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="planned.html">Planned Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="version_history.html">Version History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">lrengine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Call a Custom Function</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/drive.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="call-a-custom-function">
<h1>Call a Custom Function<a class="headerlink" href="#call-a-custom-function" title="Permalink to this headline">Â¶</a></h1>
<p>You can even use a custom function that operates on each element of the parent directory to add the outputs as classifiers. Do this my adding the names of the classifier columns, defining the function call, and adding any needed arguments in the form of a dictionary. For example, if the function is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">function_handle</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">args_dict</span><span class="p">):</span>

    <span class="n">use_directory</span> <span class="o">=</span> <span class="n">directory</span>
    <span class="n">output1</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;par1&#39;</span><span class="p">])</span>
    <span class="n">output2</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;par1&#39;</span><span class="p">],</span> <span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;par2&#39;</span><span class="p">])</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">output1</span><span class="p">,</span> <span class="n">output2</span><span class="p">]</span>
</pre></div>
</div>
<p>Create the object,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lrengine</span> <span class="k">as</span> <span class="nn">lr</span>

<span class="n">lrobject</span> <span class="o">=</span> <span class="n">lr</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                    <span class="n">patterns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;sample&#39;</span><span class="p">:</span> <span class="s1">&#39;\d\d&#39;</span><span class="p">},</span>
                    <span class="n">skip</span><span class="o">=</span><span class="s1">&#39;sample7&#39;</span><span class="p">,</span>
                    <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;any&#39;</span>
                    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;output1&#39;</span><span class="p">,</span> <span class="s1">&#39;output2&#39;</span><span class="p">],</span>
                    <span class="n">function</span><span class="o">=</span><span class="n">function_handle</span><span class="p">,</span>
                    <span class="n">function_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;par1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                   <span class="s1">&#39;par2&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
                    <span class="p">)</span>
</pre></div>
</div>
<p>Call the <strong>drive()</strong> method</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lrobject</span><span class="o">.</span><span class="n">drive</span><span class="p">()</span>
</pre></div>
</div>
<p>and two new columns would be added called &quot;output1&quot; and &quot;output2&quot; with the values corresponding to the function outputs. Make sure to have the function accept a path and a single dictionary that contains any additional parameters needed. Also make sure the function returns the outputs in a list that is equal in length to the given list of classifiers. Use the above example function as a template.</p>
<p>If the custom function errors, for example if it tries to operate on a file/folder in the path that is not compatible, it will return the string &quot;null&quot; for the classifier. This can be useful for avoiding tedious reorganizing of directories. Simply run <strong>lrobject.drive()</strong>, collect a frame full of successful runs or &quot;null&quot;, then use something like,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lrobject</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">lrobject</span><span class="o">.</span><span class="n">frame</span><span class="p">[</span><span class="n">lrobject</span><span class="o">.</span><span class="n">frame</span><span class="p">[</span><span class="s1">&#39;output1&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;null&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>to reduce the frame to only compatible files/folders.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sea.html" class="btn btn-neutral float-right" title="seaborn relplot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="narrow_dates.html" class="btn btn-neutral float-left" title="Narrow the Date Range" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, lrengine

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>